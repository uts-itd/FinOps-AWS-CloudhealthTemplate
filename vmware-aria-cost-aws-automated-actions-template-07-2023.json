{
   "AWSTemplateFormatVersion":"2010-09-09",
   "Description":"Please do not modify or delete this stack. This CloudFormation Template creates automated actions for the CloudHealth IAM role.",
   "Resources":{
      "Policy":{
         "Type":"AWS::IAM::ManagedPolicy",
         "Properties":{
            "ManagedPolicyName":"CloudHealth-Automated-Actions-Policy",
            "Description":"CloudHealth Billing and Reporting",
            "PolicyDocument":{
               "Version":"2012-10-17",
               "Statement":[
                  {
                     "Effect":"Allow",
                     "Action":[
                        "ec2:DeleteSnapshot"
                     ],
                     "Resource":"*"
                  },
                  {
                     "Effect":"Allow",
                     "Action":[
                        "ec2:DeleteVolume"
                     ],
                     "Resource":"*"
                  },
                  {
                     "Effect":"Allow",
                     "Action":[
                        "ec2:TerminateInstances"
                     ],
                     "Resource":"*"
                  },
                  {
                     "Effect":"Allow",
                     "Action":[
                        "ec2:StartInstances"
                     ],
                     "Resource":"*"
                  },
                  {
                     "Effect":"Allow",
                     "Action":[
                        "ec2:StopInstances"
                     ],
                     "Resource":"*"
                  },
                  {
                     "Effect":"Allow",
                     "Action":[
                        "ec2:RebootInstances"
                     ],
                     "Resource":"*"
                  },
                  {
                     "Effect":"Allow",
                     "Action":[
                        "ec2:ModifyReservedInstances"
                     ],
                     "Resource":"*"
                  },
                  {
                     "Effect":"Allow",
                     "Action":[
                        "ec2:DescribeReservedInstancesOfferings",
                        "ec2:PurchaseReservedInstancesOffering",
                        "sts:GetFederationToken"
                     ],
                     "Resource":"*"
                  },
                  {
                     "Effect":"Allow",
                     "Action":[
                        "rds:DescribeReservedDBInstancesOfferings",
                        "rds:PurchaseReservedDBInstancesOffering"
                     ],
                     "Resource":"*"
                  },
                  {
                     "Effect":"Allow",
                     "Action":[
                        "lambda:InvokeFunction"
                     ],
                     "Resource":"*"
                  },
                  {
                     "Effect":"Allow",
                     "Action":[
                        "ec2:ReleaseAddress"
                     ],
                     "Resource":"*"
                  },
                  {
                     "Effect":"Allow",
                     "Action":[
                        "ec2:CreateSnapshot"
                     ],
                     "Resource":"*"
                  },
                  {
                     "Effect":"Allow",
                     "Action":[
                        "ec2:ModifyReservedInstances",
                        "ec2:DescribeReservedInstancesOfferings",
                        "ec2:GetReservedInstancesExchangeQuote",
                        "ec2:AcceptReservedInstancesExchangeQuote"
                     ],
                     "Resource":"*"
                  },
                  {
                     "Effect":"Allow",
                     "Action":[
                        "savingsplans:DescribeSavingsPlansOfferings",
                        "savingsplans:CreateSavingsPlan",
                        "sts:GetFederationToken"
                     ],
                     "Resource":"*"
                  },
                  {
                     "Effect":"Allow",
                     "Action":[
                        "rds:DeleteDBSnapshot"
                     ],
                     "Resource":"*"
                  },
                  {
                     "Effect": "Allow",
                     "Action": [
                       "rds:StopDBInstance"
                     ],
                     "Resource": "*"
                   },
                   {
                     "Effect": "Allow",
                     "Action": [
                       "rds:StartDBInstance"
                     ],
                     "Resource": "*"
                   }
               ]
            },
            "Roles":[
               "CloudHealth-Access"
            ]
         }
      }
   },
   "Outputs":{
      "AutomatedActionsApplied":{
         "Value":"Yes"
      }
   }
}